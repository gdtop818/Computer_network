# 互联网概述

计算机网络（**网络**）：**结点**（node）+连接结点的**链路**（link）组成。 结点：**计算机、集线器、路由器、交换机**。

互**连**网（**网络的网络**）：网络之间由**路由器**互连起来。

**主机**（host）：与网络相连的**计算机**或**智能手机**。



互联网**三个阶段**：

​	第一阶段：单个网络**ARPANET**（TCP/IP协议）到互连网；

​	第二阶段：**三级结构**的互连网：主干网、地区网、校园网（企业网）；

​	第三阶段：**多层次ISP结构**的互联网；（ISP互联网服务提供者，移动电信联通）；通过ISP给客户分配IP；

​					互联网交换点IXP：允许两个网络直接相连并交换分组，不需要第三个网络来转发；***图 1-3 P7***



**互联网协会**（ISOC）：下属互联网体系结构委员会IAB下两个工程部：

​	互联网工程部IETF：分为多个工作组WG，每组由互联网工程指导小组IESG管理，分管不同工程；

​	互联网研究部IRTF：分为多个研究组RG，每组由互联网研究指导小组IRSG管理，研究一些长期问题，互联网协									议、应用、体系；

**互联网文档**（RFC）制定标准过程：

​	互联网草案（有效期6月）；建议标准（正式成为RFC文档）；互联网标准（每个标准一个编号STD 83）。



互联网的组成：***图 1-6 P10***

（1）边缘部分（端系统）：所有连接互联网的**主机**组成（用户直接使用，**通信和资源共享**）；主机A的某个进程									和主机B上的另一个进程进行通信（计算机之间的通信：**客户服务器CS方式/P2P对等方式**）

客户服务器方式（**客户和服务器都是指计算机进程或计算机软件**）：

​	客户是**服务请求方**，①用户调用后，通信时向服务器请求服务（必须**知道服务器程序地址**）②不需要特殊硬件

​	服务器是**服务提供方**，①专门提供某种服务的程序，可以**同时处理多个用户**②不断运行，一般不需要客户地址

对等连接方式（peer-2-peer）：不分服务请求和服务提供，同时是请求方也是服务方，是客户也是服务器；

（2）核心部分：大量**网络**和连接这些网络的**路由器**组成（为边缘部分提提供服务，**连通性和交换**）；

路由器（router）：实现**分组交换**（packet switching）的关键组件，接受**分组暂存**，**检查首部并查找转发表**，按照**首部的目标地址**，转发收到的分组到下一个路由器，传输过程中动态调整带宽，最终到目的主机；（各路由器**交换彼此路由信息**以便创建和动态维护路由器转发表）

交换（switching）：按某种方式**动态分配传输线路的资源**；

分组交换（packet switching）：采用**存储转发**技术，发送的整块数据为**报**文（message），将报文分割成一个个**等长数据段**，加上控制信息组成的**首部**（head），形成了一个**分组**（packet）；分组也称为“**包**”，首部为“**包头**”； ***图 1-13 P17***



计算机网络类型：

（1）作用范围：**广域网WAN**（几十到几千km）、城域网MAN（5-50km城市）、**局域网LAN**（小型工作站）、**个人区域网PAN**（10m左右）

（2）网络使用者：公用网（缴费即用）、专用网（满足特殊需要）

（3）用户接入到互联网的网络：接入网AN（本地&居民）



计算机网络性能：（10MB：10Mx8字节，10Mbit/s：比特）

（1）速率：bit/s，**bps**，数据的传送速率（数据率/比特率）；当提到速率，往往是额定速率或标称速率；

（2）带宽：**单位时间信道通过的最高数据率**，bps（原来指信号具有的频带宽度，赫兹Hz）；

（3）吞吐量：单位时间通过的实际数据率，每秒的字节数或帧数；

（4）**时延delay/latency：数据从一端到另一端的所需时间。** ***图1-14 P23***

​	发送时延：数据帧长度bit / 发送速率bps

​	传播时延（外部传输网线）：信道长度m / 电磁波在信道传输速率m/s

​	处理时延：主机或者路由器收到分组花费时间

​	排队时延：分组进入路由器后再输入队列等待处理

**并非发送速率高，总时延小，要看谁起主导地位；**

（5）时延带宽积：传播时延 x 带宽

（6）往返时间RTT 

有效数据率：数据长度 / （发送时间+RTT）

（7）利用率：

​	信道利用率：信道有多少时间是有数据通过

​	网络利用率：全网络信道利用率的加权平均

**利用率不是越大越好，根据排队理论，利用率大，时延大；**

D0是网络空闲时延，D是当前时延，利用率U：D = D0 / （1-U）



5层协议的体系结构：

（1）应用层：最高层，通过应用**进程间的交互来完成特定的网络应用**，定义**应用进程间通信和交互的规则**。进程：正在运行的程序。如：域名系统DNS、HTTP协议、SMTP协议，应用层交互的数据单元称为报文；

（2）运输层：**两台主机中进程之间的通信**提供通用的**数据传输服务**。应用进程利用该服务传送应用层报文；由于一台主机可以同时运行多个进程，**复用是多个进程可以同时使用运输层服务，分用是运输层把收到信息分别交付给应用层的相应进程；**

​	传输控制协议TCP：面向连接、可靠地数据传输服务，数据传输单位是**报文段**；

​	用户数据报协议UDP：无连接、尽最大努力的数据传输服务（**不保证可靠性**），数据传输单位是**用户数据报**；

（3）网络层（网际层、IP层）：负责为**分组交换网上不同主机提供通信服务**。发送数据时，把运输层产生的报文段或用户数据报封装成包或分组（IP数据报）进行传送，传输时选择合适的路由，协议是网际协议IP；

（4）（数据）链路层：两个**相邻节点传送数据**，在**链路传送**，**把数据链路层将网络层交下来的IP数据报组装成帧**，每一帧包括数据信息和控制信息（如同步信息，地址信息、差错控制等），检错并纠错；

（5）物理层：数据单位是bit。



实体：任何可发送或接受信息的硬件或软件过程；

协议：控制两个对等实体进行通信的规则集合；（语法定义交换信息格式，语义定义接收发送者操作）

服务：协议控制下，两个对等实体间的通信要使本层向上层提供服务；相邻两层交换信息地方叫服务访问点SAP；

TCP/IP路由器没有应用层和运输层；